name: Quick Check

# Fast workflow for development branches (not main)
on:
  push:
    branches-ignore: [ main ]
  workflow_dispatch:

# Cancel in-progress workflows for the same branch
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  PYTHON_VERSION: "3.12"

jobs:
  # Fast quality check - only linting and unit tests
  quick-check:
    name: "‚ö° Quick Check (Lint + Unit Tests)"
    runs-on: ubuntu-latest
    timeout-minutes: 15
    
    steps:
    - name: "üì• Checkout code"
      uses: actions/checkout@v4
      
    - name: "üêç Set up Python ${{ env.PYTHON_VERSION }}"
      uses: actions/setup-python@v4
      with:
        python-version: ${{ env.PYTHON_VERSION }}
        
    - name: "üì¶ Cache pip dependencies"
      uses: actions/cache@v3
      with:
        path: ~/.cache/pip
        key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }}
        restore-keys: |
          ${{ runner.os }}-pip-
          
    - name: "‚öôÔ∏è Install dependencies"
      run: |
        python -m pip install --upgrade pip
        pip install -e ".[dev]"
        
    - name: "‚ö° Run quick checks (code quality + unit tests)"
      run: .github/scripts/quick-check.sh
